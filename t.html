<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure App Portal</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #0f0f0f; color: #e0e0e0; text-align: center; margin: 0; padding: 20px; }
        .hidden { display: none !important; }
        .card { background: #1a1a1a; padding: 30px; border-radius: 12px; box-shadow: 0 8px 32px rgba(0,0,0,0.5); display: inline-block; margin-top: 50px; }
        input { padding: 12px; border-radius: 5px; border: 1px solid #333; background: #252525; color: white; margin-bottom: 10px; }
        button { padding: 12px 24px; border: none; border-radius: 5px; background: #6200ee; color: white; cursor: pointer; font-weight: bold; transition: 0.3s; }
        button:hover { background: #3700b3; }
        .nav { margin-bottom: 20px; }
        iframe { width: 95%; height: 85vh; border: 2px solid #333; border-radius: 8px; margin-top: 15px; background: white; }
    </style>
</head>
<body>

    <div id="auth-section" class="card">
        <h2>Authentication Required</h2>
        <input type="password" id="pass-input" placeholder="Enter Access Code">
        <br>
        <button onclick="handleLogin()">Unlock Access</button>
    </div>

    <div id="app-section" class="hidden">
        <div class="nav">
            <button onclick="loadBlob('https://astra.pxi-fusion.com/embed/truffled/brawl-stars?web-socket-enabled=false')">Brawl Stars</button>
            <button onclick="loadBlob('https://deli-game.github.io/geometry-dash-lite/')">Geometry Dash</button>
            <button style="background: #cf6679;" onclick="logout()">Logout</button>
        </div>
        <div id="display-area"></div>
    </div>

    <script>
        // --- COOKIE HELPERS ---
        function setCookie(name, value, days) {
            let expires = "";
            if (days) {
                let date = new Date();
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                expires = "; expires=" + date.toUTCString();
            }
            document.cookie = name + "=" + (value || "") + expires + "; path=/; SameSite=Strict";
        }

        function getCookie(name) {
            let nameEQ = name + "=";
            let ca = document.cookie.split(';');
            for(let i=0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0)==' ') c = c.substring(1,c.length);
                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
            }
            return null;
        }

        // --- AUTH LOGIC ---
        function checkStatus() {
            if (getCookie("access_granted") === "true") {
                document.getElementById('auth-section').classList.add('hidden');
                document.getElementById('app-section').classList.remove('hidden');
            }
        }

        function handleLogin() {
            const input = document.getElementById('pass-input').value;
            // You can change "your-secret-password" to whatever you like
            if (input === "your-secret-password") {
                setCookie("access_granted", "true", 1); // Valid for 1 day
                checkStatus();
            } else {
                alert("Invalid Key");
            }
        }

        function logout() {
            setCookie("access_granted", "", -1); // Expire the cookie
            location.reload();
        }

        // --- BLOB IFRAME LOGIC ---
        function loadBlob(targetUrl) {
            const display = document.getElementById('display-area');
            display.innerHTML = ''; // Clear current

            const htmlContent = `
                <html>
                <body style="margin:0;padding:0;overflow:hidden;">
                    <iframe src="${targetUrl}" style="width:100vw;height:100vh;border:none;"></iframe>
                </body>
                </html>
            `;

            const blob = new Blob([htmlContent], { type: 'text/html' });
            const blobUrl = URL.createObjectURL(blob);

            const frame = document.createElement('iframe');
            frame.src = blobUrl;
            display.appendChild(frame);
        }

        // Run check on load
        window.onload = checkStatus;
    </script>
</body>
</html>
